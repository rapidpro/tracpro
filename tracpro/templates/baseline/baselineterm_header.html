{% load i18n %}
{% load charts %}

<h2 class="page-header">{{ baselineterm.name }}</h2>

<div class="pull-right buttons">
  {% if org_perms.baseline.baselineterm_update %}
    <a class="btn btn-default" href="{% url 'baseline.baselineterm_update' baselineterm.pk %}">
      <span class="glyphicon glyphicon-pencil"></span>
      {% trans "Edit" %}
    </a>
  {% endif %}
  {% if org_perms.baseline.baselineterm_delete %}
    <button class="btn btn-default" type="button" data-toggle="modal" data-target="#confirm-delete-dialog">
      <span class="glyphicon glyphicon-trash"></span>
      {% trans "Delete..." %}
    </button>
  {% endif %}
  <button type="button" class="btn btn-default" id="toggle-filters"
          data-toggle="collapse" data-target="#filters">
    {% trans "Hide filters..." %}
  </button>
</div>

<div class="clearfix"></div>

<div class="collapse in" id="filters">
  <form class="filter-form form-horizontal" method="GET">
    {% if form.non_field_errors %}
      {% for error in form.non_field_errors %}
        <div class="alert alert-danger">{{ error }}</div>
      {% endfor %}
    {% elif form.errors %}
      <div class="alert alert-danger">Please fix the errors below.</div>
    {% endif %}

    <div class="row">
      {% filter_field form "goal" %}
    </div>

    <div class="row">
      {% filter_field form "region" %}
    </div>

    <div class="well">
      <button type="submit" class="btn btn-primary">
        {% trans "Update" %}
      </button>
      <a class="btn btn-default" href="{% url "baseline.baselineterm_read" object.pk %}">
        {% trans "Clear filters" %}
      </a>
    </div>
  </form>
</div>

<div class="modal fade" role="dialog" id="confirm-delete-dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" type="button" data-dismiss="modal">
          &times;
        </button>
        <h4 class="modal-title">
          {% trans "Confirm" %}
        </h4>
      </div>
      <div class="modal-body">
        {% trans "Are you sure that you want to delete this baseline term?" %}
      </div>
      <div class="modal-footer">
        <form id="delete-form" method="POST" class="form-inline"
              action="{% url 'baseline.baselineterm_delete' baselineterm.pk %}">
          {% csrf_token %}
          <button class="btn btn-default" type="button" data-dismiss="modal">
            {% trans "Cancel" %}
          </button>
          <button type="submit" class="btn btn-danger">
            {% trans "Delete" %}
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
